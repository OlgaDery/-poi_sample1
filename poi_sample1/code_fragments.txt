          
         <script type="text/javascript">
// pause
	var pointTemplateAll = "<tr id='poi'><td>{{index}}</td>"+
		"<td><span class='noedit name'>{{poi_name}}</span><input type='text' class='edit name'></input></td>"+
		"<td><span class='noedit lat'>{{poi_lat}}</span><input class='edit lat'/></td>"+
		"<td><span class='noedit lng'>{{poi_lng}}</span><input class='edit lng'/></td>"+
		"<td><span class='noedit type'>{{poi_type}}</span><input class='edit type'/></td>"+
		"<td><span class='noedit subtype'>{{poi_subtype}}</span><input class='edit subtype'/></td>"+
		"<td><button data-id='{{poi_id}}' id='edit_button' class='noedit buttonE'>Edit</button><button data-id='{{poi_id}}' id='edit_button' class='edit buttonS'>Save</button><button data-id='{{poi_id}}' id='edit_button' class='edit buttonC'>Cancel</button></td>"+
		"<td><button data-id={{poi_id}} id='remove' class='noedit'>Delete</button></td>"+
		"<td><button data-id={{poi_id}} id='send' class='noedit'>Send</button></td>"+
		"<td><button data-id='{{poi_id}}' id='zoom_to_point'>Zoom</button></td></tr>";
	var listOfPOIs = ${requestScope.pois_for_vis};
	var elauatedListOfPOIs = eval(listOfPOIs);
	$('#all_pois').empty();
	var poi_list = [];
	var index;
	for (var i = 0; i < elauatedListOfPOIs.length; i++ ) {
		var poi = eval(elauatedListOfPOIs[i]);
		poi.index = i + 1; 
		poi_list.push(poi);
		$('#all_pois').append(Mustache.render(pointTemplateAll, poi));
	}
	setMapView(JSON.stringify(poi_list));
</script> 
          
          
   
          
          
          
            </datasource>
                <datasource jta="true" jndi-name="java:jboss/datasources/inventory" pool-name="Inventory" enabled="true" use-ccm="true">
                    <connection-url>jdbc:derby://localhost:1527/inventory</connection-url>
                    <driver-class>org.apache.derby.jdbc.ClientDriver</driver-class>
                    <driver>derby</driver>
                    <security>
                        <user-name>app</user-name>
                        <password>app</password>
                    </security>
                    <validation>
                        <validate-on-match>false</validate-on-match>
                        <background-validation>false</background-validation>
                    </validation>
                    <timeout>
                        <set-tx-query-timeout>false</set-tx-query-timeout>
                        <blocking-timeout-millis>0</blocking-timeout-millis>
                        <idle-timeout-minutes>0</idle-timeout-minutes>
                        <query-timeout>0</query-timeout>
                        <use-try-lock>0</use-try-lock>
                        <allocation-retry>0</allocation-retry>
                        <allocation-retry-wait-millis>0</allocation-retry-wait-millis>
                    </timeout>
                    <statement>
                        <share-prepared-statements>false</share-prepared-statements>
                    </statement>
                </datasource>
                <drivers>
                    <driver name="h2" module="com.h2database.h2">
                        <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                    </driver>
                    <driver name="derby" module="org.apache.derby">
                        <driver-class>org.apache.derby.jdbc.ClientDriver</driver-class>
                    </driver>
                </drivers>
            </datasources>
        </subsystem>




</security-domain>
                <security-domain name="servlet-security-inventory" cache-type="default">
                    <authentication>
                        <login-module code="Database" flag="required">
                            <module-option name="dsJndiName" value="java:jboss/datasources/inventory"/>
                            <module-option name="principalsQuery" value="SELECT user_password FROM USERS WHERE user_name = ?"/>
                            <module-option name="rolesQuery" value="SELECT contrib_level,'Roles' FROM USERS WHERE user_name = ?"/>
                        </login-module>
                    </authentication>
                </security-domain>
            </security-domains>
        </subsystem>

